/* --------------------------------------------------------------------------------
  This file was automatically generated by the Athlos Project Editor.
  Athlos Project Editor, v1.0 BETA
-------------------------------------------------------------------------------- */

package com.example.marspioneer.client.stubs;


import com.example.marspioneer.proto.*;
import com.nkasenides.athlos.client.stubs.OnRequestSuccessListener;
import com.raylabz.javahttp.BinaryHTTPRequest;
import com.raylabz.javahttp.OnFailureListener;
public class ListPlayers {

    private final String url = Stubs.BASE_URL + "/api/player/list";

    public void sendAndWait(ListPlayersRequest request, OnRequestSuccessListener<ListPlayersResponse> successListener, OnFailureListener failureListener) {
        BinaryHTTPRequest.create(url)
                .onSuccess(response -> {
                    final byte[] content = response.getContent();
                    final ListPlayersResponse protoResponse = ListPlayersResponse.parseFrom(content);
                    successListener.onSuccess(protoResponse);
                })
                .onFailure(failureListener)
                .putBytes(request.toByteArray())
                .build()
                .sendAndWait();
    }

    public void send(ListPlayersRequest request, OnRequestSuccessListener<ListPlayersResponse> successListener, OnFailureListener failureListener) {
        BinaryHTTPRequest.create(url)
                .onSuccess(response -> {
                    final byte[] content = response.getContent();
                    final ListPlayersResponse protoResponse = ListPlayersResponse.parseFrom(content);
                    successListener.onSuccess(protoResponse);
                })
                .onFailure(failureListener)
                .putBytes(request.toByteArray())
                .build()
                .send();
    }

    public void sendAndWait(ListPlayersRequest request, OnRequestSuccessListener<ListPlayersResponse> successListener) {
        long t2 = System.currentTimeMillis();
        BinaryHTTPRequest.create(url)
                .onSuccess(response -> {
                    long t = System.currentTimeMillis();
                    final byte[] content = response.getContent();
                    final ListPlayersResponse protoResponse = ListPlayersResponse.parseFrom(content);
                    System.out.println("Parse response time: " + (System.currentTimeMillis() - t));
                    t = System.currentTimeMillis();
                    successListener.onSuccess(protoResponse);
                    System.out.println("OnSuccess() -> " + (System.currentTimeMillis() - t));
                    System.out.println("Response latency (total): " + response.getLatency());
                })
                .putBytes(request.toByteArray())
                .build()
                .sendAndWait();
        System.out.println("SendAndWait() -> " + (System.currentTimeMillis() - t2));
    }

    public void send(ListPlayersRequest request, OnRequestSuccessListener<ListPlayersResponse> successListener) {
        BinaryHTTPRequest.create(url)
                .onSuccess(response -> {
                    final byte[] content = response.getContent();
                    final ListPlayersResponse protoResponse = ListPlayersResponse.parseFrom(content);
                    successListener.onSuccess(protoResponse);
                })
                .putBytes(request.toByteArray())
                .build()
                .send();
    }
}


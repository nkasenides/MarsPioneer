/* --------------------------------------------------------------------------------
  This file was automatically generated by the Athlos Project Editor.
  Athlos Project Editor, v1.0 BETA
-------------------------------------------------------------------------------- */

package com.example.marspioneer.service;
import com.example.marspioneer.model.MPGameSession;
import com.example.marspioneer.persistence.DBManager;
import com.nkasenides.athlos.backend.AthlosService;
import com.example.marspioneer.proto.DeAuthenticateRequest;
import com.example.marspioneer.auth.*;
import com.example.marspioneer.proto.DeAuthenticateResponse;

public class DeAuthenticate implements AthlosService<DeAuthenticateRequest, DeAuthenticateResponse> {

    @Override    
    public DeAuthenticateResponse serve(DeAuthenticateRequest request, Object... additionalParams) {

        //Retrieve the game session:
        final MPGameSession gameSession = DBManager.gameSession.get(request.getGameSessionID());
        if (gameSession == null) {
            return DeAuthenticateResponse.newBuilder()
                    .setStatus(DeAuthenticateResponse.Status.NO_SUCH_GAME_SESSION)
                    .setMessage("NO_SUCH_GAME_SESSION")
                    .build();
        }

        //Delete the session:
        DBManager.gameSession.delete(gameSession);

        return DeAuthenticateResponse.newBuilder()
                .setStatus(DeAuthenticateResponse.Status.OK)
                .setMessage("OK")
                .build();

    }    
    
}

